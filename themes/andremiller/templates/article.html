{% extends "base.html" %}
{% block html_lang %}{{ article.lang }}{% endblock %}

{% block title %}{{ SITENAME|striptags }} - {{ article.title|striptags  }}{% endblock %}

{% block head %}
  {{ super() }}

  {% import 'translations.html' as translations with context %}
  {% if translations.entry_hreflang(article) %}
    {{ translations.entry_hreflang(article) }}
  {% endif %}

  {% if article.description %}
    <meta name="description" content="{{article.description}}" />
  {% endif %}

  {% for tag in article.tags %}
    <meta name="tags" content="{{tag}}" />
  {% endfor %}

{% endblock %}

{% block content %}
  <article>
    <!-- Article Header -->
    <header class="mb-4">
      <h1 class="display-4 fw-bold mb-3">{{ article.title }}</h1>

      {% import 'translations.html' as translations with context %}
      {{ translations.translations_for(article) }}

      <!-- Article Metadata -->
      <div class="text-muted mb-3">
        <span class="me-3">
          <i class="bi bi-calendar3"></i>
          <time datetime="{{ article.date.isoformat() }}">
            {{ article.locale_date }}
          </time>
        </span>

        {% if article.modified %}
          <span class="me-3">
            <i class="bi bi-pencil"></i>
            <time datetime="{{ article.modified.isoformat() }}">
              Updated {{ article.locale_modified }}
            </time>
          </span>
        {% endif %}

        {% if article.category %}
          <span class="me-3">
            <i class="bi bi-folder"></i>
            <a href="{{ SITEURL }}/{{ article.category.url }}" class="text-decoration-none">{{ article.category }}</a>
          </span>
        {% endif %}
      </div>

      <!-- Tags -->
      {% if article.tags %}
        <div class="mb-3">
          {% for tag in article.tags %}
            <a href="{{ SITEURL }}/{{ tag.url }}" class="badge bg-secondary text-decoration-none me-1">
              {{ tag }}
            </a>
          {% endfor %}
        </div>
      {% endif %}

      <hr>
    </header>

    <!-- Article Content -->
    <div class="article-content mb-5">
      {{ article.content }}
    </div>

    <!-- Article Footer -->
    <footer class="border-top pt-3">
      <div class="row">
        <div class="col-md-6">
          <p class="text-muted small mb-0">
            <i class="bi bi-calendar3"></i> Published {{ article.locale_date }}
            {% if article.modified %}
              <br><i class="bi bi-pencil"></i> Last updated {{ article.locale_modified }}
            {% endif %}
          </p>
        </div>
        <div class="col-md-6 text-md-end">
          <a href="{{ SITEURL }}/" class="btn btn-outline-secondary btn-sm">
            <i class="bi bi-arrow-left"></i> Back to all articles
          </a>
        </div>
      </div>
    </footer>
  </article>
{% endblock %}
